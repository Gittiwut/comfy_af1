# constraints_blackwell.txt - Updated for RTX 5090 & B100/B200
# Based on research from xFormers issues #1251, #1285 and Unsloth compatibility

# PyTorch with CUDA 12.8 support (confirmed working)
torch>=2.8.0
torchvision>=0.23.0  
torchaudio>=2.8.0

# DO NOT INSTALL xFormers here - will be handled specially in entrypoint
# xformers installation requires custom build for Blackwell compatibility

# Triton with Blackwell support
triton>=3.4.0

# CUDA 12.8 libraries (essential for Blackwell)
nvidia-ml-py>=12.580.1
nvidia-cuda-runtime-cu12>=12.8.0
nvidia-cuda-cupti-cu12>=12.8.0
nvidia-cudnn-cu12>=9.10.0

# Multi-GPU optimizations (important for enterprise Blackwell)
nvidia-nccl-cu12>=2.21.5

# bitsandbytes with CUDA 12.8 support (confirmed by Unsloth team)
bitsandbytes>=0.45.0

# Core ML libraries (flexible versions to avoid conflicts)
einops>=0.8.0
tqdm>=4.66.2
Pillow>=10.2.0
scipy>=1.12.0
transformers>=4.37.0
diffusers>=0.26.0
accelerate>=0.26.0
safetensors>=0.4.2

# Essential ComfyUI libraries
opencv-python>=4.9.0
imageio>=2.34.0
psutil>=5.9.8
requests>=2.31.0
aiohttp>=3.9.0

# ComfyUI specific requirements
huggingface_hub>=0.20.0
segment_anything>=1.0
facexlib>=0.3.0
insightface>=0.7.3
ftfy>=6.1.1
timm>=0.9.12
onnxruntime-gpu>=1.16.0
piexif>=1.1.3

# Build tools (needed for potential source builds)
ninja>=1.11.0
packaging>=21.0
wheel>=0.38.0